# Техническая документация

## Структура проекта

Проект состоит из трех основных компонентов:

1. **Фронтенд (Streamlit)**
   - Расположен в `/frontend`
   - Основной файл: `client.py`
   - Предоставляет интерактивный интерфейс для:
     - Загрузки данных и EDA
     - Обучения моделей
     - Просмотра информации о моделях
     - Получения предсказаний

2. **Бэкенд сервис (FastAPI)**
   - Расположен в `/service`
   - Основной файл: `app.py`
   - Предоставляет REST API эндпоинты для:
     - Управления данными
     - Обучения моделей
     - Оценки моделей
     - Получения предсказаний

3. **ML пайплайн**
   - Расположен в `/service/ml_pipeline.py`
   - Отвечает за:
     - Предобработку изображений
     - Извлечение признаков с помощью ResNet50
     - Обучение SVM
     - Оценку моделей

## API документация

### Управление данными
- `POST /upload_data`: Загрузка и распаковка датасета
- `GET /eda`: Получение результатов разведочного анализа

### Управление моделями
- `POST /fit`: Обучение новой SVM модели
- `GET /list_models`: Список доступных моделей
- `POST /set_model`: Активация модели для инференса
- `POST /models_info`: Получение детальных метрик моделей
- `DELETE /remove_all`: Удаление всех не дефолтных моделей

### Инференс
- `POST /predict`: Получение предсказаний для загруженного изображения

## Интерфейс Streamlit

Интерфейс состоит из 4 основных разделов:

1. **Загрузка данных и EDA**
   - Загрузка ZIP архива с датасетом
   - Просмотр статистики датасета
   - Визуализация распределений

2. **Обучение моделей**
   - Настройка гиперпараметров SVM
   - Обучение новых моделей
   - Отслеживание процесса обучения

3. **Информация о моделях**
   - Сравнение моделей
   - Просмотр метрик (Accuracy, Precision, Recall, F1)
   - Сравнение ROC и PR кривых

4. **Инференс модели**
   - Выбор активной модели
   - Загрузка изображений
   - Просмотр предсказаний

## Быстрый старт

### Тестовые данные
Для тестирования функциональности приложения можно использовать данные из папки `/test_data`, которая содержит:
- Пример изображения для инференса
- Тестовый датасет в ZIP архиве для обучения моделей

### Запуск через Docker

1. Сборка образов:
```bash
docker compose build
```
2. Запуск сервиса:
```bash
docker compose up
```
### Локальный запуск

1. Запуск бэкенд сервиса:
```bash
cd service
pip install -r requirements.txt
uvicorn app:app --reload
```
2. Запуск Streamlit интерфейса:
```bash
cd frontend
pip install -r requirements.txt
streamlit run client.py
```